<!DOCTYPE html>
<!-- 
  CAMPUS VIRTUAL · SIMAQ v2.1 (ID de Curso Corregido)
  -------------------------------------------------------------------
  - CORRECCIÓN CRÍTICA: Se ha corregido el ID del curso en el enlace "Acceder al Curso" para que coincida con el ID esperado por la página de la lección. Esto soluciona el error "Curso no válido".
  - ACTUALIZACIÓN DE CONTENIDO: Se ha actualizado el texto y la imagen de la tarjeta del curso para reflejar el contenido de "Manejo de Plaguicidas".
  -------------------------------------------------------------------
-->
<html lang="es-CL">
<head>
    <meta charset="UTF-8" />
    <title>Campus Virtual – SIMAQ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex, nofollow">
    <meta name="description" content="Dashboard de estudiante para acceder a cursos, recursos y comunidad de SIMAQ.">
    <link rel="icon" href="https://bmeryu.github.io/SIMAQ/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="https://bmeryu.github.io/SIMAQ/Logo_SIMAQ.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --simaq-blue: #0057FF;
            --simaq-dark-blue: #003db3;
        }
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .text-simaq-blue { color: var(--simaq-blue); }
        .bg-simaq-blue { background-color: var(--simaq-blue); }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="text-gray-800">

  <header class="bg-white shadow-sm sticky top-0 z-30">
    <nav class="container mx-auto px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-2" aria-label="Ir al inicio de SIMAQ">
        <img src="https://bmeryu.github.io/SIMAQ/Logo_SIMAQ.png" alt="Logo SIMAQ" class="h-16 md:h-20 w-auto" />
      </a>
      <div id="user-profile" class="hidden sm:flex items-center gap-4 relative">
        <span id="user-name" class="font-semibold text-gray-700"></span>
        <button id="logout-btn" class="text-sm font-medium text-gray-600 hover:text-red-600 transition-colors">Cerrar sesión</button>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-6 py-12 max-w-7xl">
    <section class="mb-12">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 leading-tight">¡Bienvenido de nuevo, <span id="welcome-name">Alumno</span>!</h1>
      <p class="text-lg text-gray-600 mt-2">Continuemos fortaleciendo tus competencias.</p>
    </section>

    <section aria-labelledby="courses-heading">
      <h2 id="courses-heading" class="text-2xl font-bold border-b border-gray-300 pb-3 mb-8">Mis Cursos Disponibles</h2>
      <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">

        <!-- Curso: Plaguicidas -->
        <article class="bg-white rounded-2xl shadow-lg card-hover overflow-hidden flex flex-col" data-course-id="manejo-plaguicidas-sag">
          <img src="https://images.unsplash.com/photo-1591785233519-27c95b655d40?q=80&w=2070&auto=format&fit=crop" 
               alt="Persona aplicando plaguicidas en un campo agrícola" 
               class="h-48 w-full object-cover">
          <div class="p-6 flex-grow flex flex-col">
            <span class="inline-block text-xs font-semibold uppercase tracking-wider text-green-700 bg-green-100 px-2 py-1 rounded-full mb-4 self-start">Disponible</span>
            <h3 class="text-xl font-bold mt-2 mb-2">Uso y Manejo de Plaguicidas (Credencial SAG)</h3>
            <p class="text-gray-600 text-sm mb-6 flex-grow">Aprende la normativa, calibración y aplicación segura para obtener tu credencial SAG.</p>
          </div>
          <div class="card-footer bg-gray-50 px-6 py-4">
            <a href="campus-curso-simaq.html?course=manejo-plaguicidas-sag" class="course-action-btn block text-center bg-simaq-blue text-white font-bold py-3 px-5 rounded-lg transition-colors hover:bg-simaq-dark-blue">
                Acceder al Curso
            </a>
          </div>
        </article>
        
        <!-- Aquí puedes agregar más tarjetas de cursos en el futuro -->

      </div>
    </section>
  </main>

  <footer class="bg-white border-t mt-16 text-center text-gray-500 text-sm py-6">
    © 2025 SIMAQ Capacitaciones · Todos los derechos reservados.
  </footer>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // --- CONFIGURACIÓN DE FIREBASE PARA SIMAQ ---
      const firebaseConfig = {
          apiKey: "AIzaSyDfkx7XhbHIYqtRTTXjL9T-5qW5LenqYjI",
          authDomain: "simaq-2ed6c.firebaseapp.com",
          projectId: "simaq-2ed6c",
          storageBucket: "simaq-2ed6c.firebasestorage.app",
          messagingSenderId: "976543052975",
          appId: "1:976543052975:web:1b8d35f9a6d3b1cbb1d05a",
          measurementId: "G-1PRF6FG2YY"
      };
      
      try { firebase.initializeApp(firebaseConfig); } catch(e) { console.warn("Firebase ya fue inicializado."); }
      
      const auth = firebase.auth();
      const db = firebase.firestore();

      auth.onAuthStateChanged(user => {
        if (user) {
          const name = user.displayName || 'Alumno';
          document.getElementById('user-name').textContent = name;
          document.getElementById('welcome-name').textContent = name;
          document.getElementById('user-profile').classList.remove('hidden');
          
          document.getElementById('logout-btn').addEventListener('click', () => {
            auth.signOut().then(() => window.location.href = 'index.html');
          });
        } else {
          window.location.href = 'acceso-simaq.html';
        }
      });
    });
  </script>
</body>
</html>

